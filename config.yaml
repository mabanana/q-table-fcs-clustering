# Q-Learning FCS Clustering Configuration

# Data paths
data:
  positive: "data/positive/"
  mixed_training: "data/mixed_training/"
  mixed_test: "data/mixed/"

# Markers to use from FCS files - FlowCap II Dendritic Cell Cytokine Data
markers:
  primary: ["IFNa", "CD123", "MHCII", "CD14", "CD11c", "IL6", "IL12", "TNFa"]
  # Selected markers for state space (most informative for dendritic cell activation)
  selected_for_state: ["CD123", "IFNa", "IL12"]
  # Which markers to use for clustering (defaults to primary)
  use_for_clustering: ["CD123", "IFNa", "IL12"]

# FCS Loader configuration
fcs_loader:
  markers: ["IFNa", "CD123", "MHCII", "CD14", "CD11c", "IL6", "IL12", "TNFa"]
  compensation: false  # Data is already compensated (APPLY COMPENSATION: TRUE in metadata)
  transform: true  # Apply asinh transformation

# Discretization bins for dendritic cell markers and cytokines
discretization:
  # Binning method: "quantile" for data-driven bins or "fixed" for predefined thresholds
  method: "quantile"
  n_bins: 4
  
  # Selected markers for state encoding (most informative for dendritic cell analysis)
  selected_markers: ["CD123", "IFNa", "IL12"]
  
  # Fixed fluorescence intensity bins (used when method="fixed")
  # Cytokine bins (IFNa, IL6, IL12, TNFa) - fluorescence intensity
  # Note: Use very large number (999999) as practical upper bound
  cytokine_bins: [0, 100, 500, 2000, 999999]
  
  # Dendritic cell marker bins (CD123, MHCII, CD14, CD11c) - fluorescence intensity
  dendritic_bins: [0, 500, 1500, 5000, 999999]
  
# Q-learning parameters
q_learning:
  epsilon_start: 0.3
  epsilon_end: 0.05
  epsilon_decay: 0.995
  learning_rate: 0.1
  discount_factor: 0.9
  n_clusters_range: [2, 10]  # Range of possible cluster counts to choose from

# Training parameters
training:
  stage1_episodes: 1000
  stage2_episodes: 1000
  batch_size: 10  # Number of files to process per episode
  random_seed: 42

# GPU settings
gpu:
  use_gpu: true
  fallback_to_cpu: true

# Visualization settings
visualization:
  dpi: 300
  figure_size: [10, 8]
  color_scheme: "viridis"
  output_dir: "output/plots/"

# Output settings
output:
  q_table_path: "output/q_table.pkl"
  results_path: "output/results.csv"
  log_path: "output/training.log"
